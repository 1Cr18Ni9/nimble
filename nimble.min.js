(function(a){var b=Object.keys||function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};var c=Object.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};var d=function(a,b){var c=Array.prototype[a];return function(d,e,f){var g=d[a];return g&&g===c?g.call(d,e,f):b(d,e,f)}};var e=d("forEach",function(a,c){for(var d=0,e=b(a),f=e.length;d<f;d++)c(a[e[d]],e[d],a)});var f=function(a,d,f){var g=c(a)?a.length:b(a).length;if(!g)return f();var h=0;e(a,function(){var a=Array.prototype.slice.call(arguments,0,d.length-1);a[d.length-1]=function(a){a?(f(a),f=function(){}):++h===g&&f()},d.apply(this,a)})};var g=function(a,c,d){var e=b(a);if(!e.length)return d();var f=0;var g=function(){var b=e[f];var h=[a[b],b,a].slice(0,c.length-1);h[c.length-1]=function(a){a?(d(a),d=function(){}):++f===e.length?d():g()},c.apply(this,h)};g()};var h=d("map",function(a,b){var c=[];e(a,function(a,d,e){c[c.length]=b(a,d,e)});return c});var i=function(a){return function(b,c,d){var e=[];a(b,function(a,b,d,f){var g=[a,b,d].slice(0,c.length-1);g[c.length-1]=function(a,b){e[e.length]=b,f(a)},c.apply(this,g)},function(a){d(a,e)})}};var j=d("filter",function(a,b,c){var d=[];e(a,function(a,c,e){b(a,c,e)&&(d[d.length]=a)});return d});var k=function(a,b,c){var d=[];f(a,function(a,c,e,f){var g=[a,c,e].slice(0,b.length-1);g[b.length-1]=function(b,c){c&&(d[d.length]=a),f(b)},b.apply(this,g)},function(a){c(a,d)})};var l=d("reduce",function(a,b,c){e(a,function(a,d,e){c=b(c,a,d,e)});return c});var m=function(a,b,c,d){g(a,function(a,d,e,f){var g=[c,a,d,e].slice(0,b.length-1);g[b.length-1]=function(a,b){c=b,f(a)},b.apply(this,g)},function(a){d(a,c)})};a.each=function(a,b,c){return(c?f:e)(a,b,c)},a.map=function(a,b,c){return(c?i(f):h)(a,b,c)},a.filter=function(a,b,c){return(c?k:j)(a,b,c)},a.reduce=function(a,b,c,d){return(d?m:l)(a,b,c,d)},a.parallel=function(a,b){var c=new a.constructor;f(a,function(a,b,d){a(function(a){var e=Array.prototype.slice.call(arguments,1);c[b]=e.length<=1?e[0]:e,d(a)})},function(a){(b||function(){})(a,c)})},a.series=function(a,b){var c=new a.constructor;g(a,function(a,b,d){a(function(a,e){var f=Array.prototype.slice.call(arguments,1);c[b]=f.length<=1?f[0]:f,d(a)})},function(a){(b||function(){})(a,c)})}})(typeof exports=="undefined"?this._={}:exports)